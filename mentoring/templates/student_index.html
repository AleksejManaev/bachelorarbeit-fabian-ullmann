{% extends request.is_ajax|yesno:"base_ajax.html,base_portal.html" %}
{% load material %}
{% load filter %}
{% load i18n %}
{% load staticfiles %}

{% block material_content %}
    <div class="card">
        <div class="card-body">
            <ul class="tab-nav tn-justified tn-icon" role="tablist" tabindex="1"
                style="overflow: hidden; outline: none;">
                <li role="presentation" class="active">
                    <a class="col s6" href="#tab-1" aria-controls="tab-1" role="tab" data-toggle="tab"
                       aria-expanded="true">
                        {% trans 'Placement tab' %}
                    </a>
                </li>
                <li role="presentation" class="">
                    <a class="col s6" href="#tab-2" aria-controls="tab-2" role="tab" data-toggle="tab"
                       aria-expanded="false">
                        {% trans 'Thesis tab' %}
                    </a>
                </li>
            </ul>

            <div class="tab-content">
                <div role="tabpanel" class="tab-pane animated fadeIn active" id="tab-1">
                    <div class="card-header white">
                        <div class="actions">
                            <a href="{% url 'student-placement-create' %}"><i
                                    class="mdi-content-add"></i></a></div>
                    </div>
                    <div class="card-content">
                        <form enctype="multipart/form-data" action="{% url 'student-placement-update' %}" method="post">
                            {% csrf_token %}
                            {% include 'student_placement_widget.html' %}
                        </form>

                        {% with placement as org %}
                            {% for placement in object.placement_set.all|dictsortreversed:'created_on' %}
                                {% if not placement.pk == org.pk %}
                                    {% include 'student_placement_widget.html' %}
                                {% endif %}
                            {% endfor %}
                        {% endwith %}
                    </div>


                </div>
                {#      muss 'active' sein bei $(document).ready(), damit _todo funktioniert        #}
                <div role="tabpanel" class="tab-pane animated fadeIn active" id="tab-2">
                    <div class="card-header white">
                        <div class="actions">
                            <a href="{% url 'student-thesis-create' %}"><i
                                    class="mdi-content-add"></i></a></div>
                    </div>
                    <div class="card-content">
                        {% include 'student_thesis_widget.html' %}
                        {% with thesis as org %}
                            {% for thesis in object.thesis_set.all|dictsortreversed:'created_on' %}

                                {% if not thesis.pk == org.pk %}
                                    {% include 'student_thesis_widget_inactive.html' %}
                                {% endif %}
                            {% endfor %}
                        {% endwith %}
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block material_extra_script %}
    {% material_todo_js %}
    <script type="text/javascript">
        $(function () {

        });
    </script>


{% endblock %}